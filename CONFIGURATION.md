# Конфигурация 8pilot

## Настройка API ключей

После внесенных изменений, API ключи OpenAI и Anthropic больше не настраиваются через UI, а хранятся на стороне бэкенда для повышения безопасности.

### Настройка бэкенда

1. Скопируйте файл `backend/env.example` в `backend/.env`:
   ```bash
   cp backend/env.example backend/.env
   ```

2. Отредактируйте файл `backend/.env` и установите ваши API ключи:
   ```env
   # AI Provider API Keys (Обязательно)
   OPENAI_API_KEY=sk-your-real-openai-api-key-here
   ANTHROPIC_API_KEY=sk-ant-your-real-anthropic-api-key-here
   
   # Остальные настройки можно оставить по умолчанию
   DEBUG=false
   HOST=0.0.0.0
   PORT=8000
   ```

### Настройка фронтенда

1. Отредактируйте файл `config.js` в корне проекта для настройки URL бэкенда:
   ```javascript
   window.APP_CONFIG = {
     BACKEND: {
       HOST: 'localhost',     // Измените на ваш хост
       PORT: 8000,           // Измените на ваш порт
       PROTOCOL: 'http',     // Измените на 'https' для продакшн
     }
   };
   ```

## Изменения в архитектуре

### Что изменилось:

1. **API ключи перенесены на бэкенд:**
   - OpenAI и Anthropic API ключи теперь настраиваются через переменные окружения
   - Убраны поля для ввода API ключей из UI
   - Повышена безопасность - ключи не передаются через браузер

2. **Конфигурация бэкенда:**
   - URL бэкенда настраивается через `config.js`
   - Можно легко изменить хост и порт для разных сред развертывания

3. **Упрощенный UI:**
   - Убраны поля для API ключей из настроек
   - Пользователь больше не думает об управлении ключами

### Что осталось в UI:

- Выбор AI провайдера (OpenAI/Anthropic)
- Настройки n8n интеграции (URL и API ключ)
- Настройки бэкенда (URL)

## Развертывание

### Разработка:
1. Настройте `.env` файл в папке `backend/`
2. Запустите бэкенд: `cd backend && python -m uvicorn app.main:app --reload`
3. Загрузите расширение в браузер

### Продакшн:
1. Настройте переменные окружения на сервере
2. Обновите `config.js` с правильным URL бэкенда
3. Соберите и разверните расширение

## Безопасность

- API ключи теперь хранятся только на сервере
- Не передаются через браузер
- Можно использовать секреты Docker/Kubernetes для управления ключами
- Логи бэкенда показывают статус конфигурации ключей без их раскрытия
