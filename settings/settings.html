<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>8pilot</title>
  <link rel="stylesheet" href="settings.css">
  <script src="../config.js"></script>
</head>
<body>
  <div class="ai-shimmer"></div>
  <div class="container">
    <h1>8pilot</h1>
    <p>AI-powered assistant for building n8n workflows efficiently.</p>
    
    <div class="status-container">
      <div id="status-indicator" class="status-indicator"></div>
      <span id="status-text">Checking status...</span>
    </div>
    
    <div class="buttons">
      <button id="show-chat">Show AI Assistant</button>
      <button id="settings-btn">‚öôÔ∏è</button>
      <button id="logout-btn">üö™</button>
    </div>
    
    <div id="settings-panel" class="settings-panel hidden">
      <h2>AI Provider</h2>
      
      <div class="toggle-container" data-selected="openai">
        <div class="toggle-slider"></div>
        <div class="toggle-option" data-value="openai">OpenAI</div>
        <div class="toggle-option" data-value="anthropic">Anthropic</div>
      </div>
      
      <div id="openai-section" class="api-section">
        <div class="model-badge active">GPT-4.1</div>
        <div class="helper-text">
          <small>API –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞</small>
        </div>
      </div>
      
      <div id="anthropic-section" class="api-section hidden">
        <div class="model-badge active">Claude 3.7</div>
        <div class="helper-text">
          <small>API –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞</small>
        </div>
      </div>
      
      <h2>Integrations</h2>
      
      <!-- N8N Integration Card -->
      <div id="n8n-integration-card" class="n8n-integration-card">
        <!-- Will be populated by JavaScript -->
      </div>
      
      <!-- Hidden fields for backward compatibility with settings.js -->
      <input type="hidden" id="n8n-api-url" />
      <input type="hidden" id="n8n-api-key" />
      
      <h2>Backend Configuration</h2>
      <div class="api-section">
        <div class="setting">
          <label for="backend-url">Backend API URL:</label>
          <input type="text" id="backend-url" placeholder="http://localhost:8000" autocomplete="off" value="http://localhost:8000">
        </div>
        <div class="helper-text">
          <small>URL for the n8n-copilot backend service</small>
        </div>
      </div>
      
      <button id="save-settings">Save Settings</button>
    </div>
    
    <div class="footer">
      <p>v1.0.0 ‚Ä¢ Powered by AI</p>
    </div>
  </div>

  <!-- N8N Setup Modal -->
  <div id="n8n-setup-modal" class="n8n-modal hidden">
    <div class="n8n-modal-overlay" onclick="hideN8nSetupModal()"></div>
    <div class="n8n-modal-content">
      <!-- Modal Header -->
      <div class="n8n-modal-header">
        <div class="n8n-modal-title">
          <div class="n8n-modal-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
          </div>
          <div>
            <h3>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ n8n</h3>
            <p>–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞ 3 —à–∞–≥–∞</p>
          </div>
        </div>
        <button class="n8n-modal-close" onclick="hideN8nSetupModal()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="n8n-modal-body">
        <!-- Progress Steps -->
        <div class="n8n-setup-steps">
          <div class="step-item" id="step-detect">
            <div class="step-number">1</div>
            <div class="step-content">
              <div class="step-title">–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ n8n</div>
            </div>
          </div>
          <div class="step-item" id="step-api">
            <div class="step-number">2</div>
            <div class="step-content">
              <div class="step-title">–°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª—é—á–∞</div>
            </div>
          </div>
          <div class="step-item" id="step-connect">
            <div class="step-number">3</div>
            <div class="step-content">
              <div class="step-title">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
            </div>
          </div>
        </div>

        <!-- Step Content -->
        <div id="step-content">
          <!-- Dynamic content will be populated here -->
        </div>
      </div>
    </div>
  </div>

  <script src="settings.js"></script>
  <script src="n8n-integration.js"></script>
</body>
</html>