# 8pilot Frontend Components

Модульная архитектура frontend компонентов для расширения 8pilot.

## Структура проекта

```
frontend/
├── content.js                 # Главный файл инициализации
├── components/                # UI компоненты
│   ├── activationIcon.js     # Иконка активации
│   ├── menuManager.js        # Управление меню
│   ├── chatManager.js        # Основной менеджер чата
│   ├── dragButton.js         # Кнопка перетаскивания
│   ├── plusMenu.js           # Меню плюс
│   ├── fileAttachment.js     # Прикрепление файлов
│   └── chatMessages.js       # Сообщения чата
├── services/                  # Сервисы
│   ├── workflowExtractor.js  # Извлечение данных workflow
│   └── openaiService.js      # Сервис OpenAI API
├── utils/                     # Утилиты
│   └── stateManager.js       # Управление состоянием
└── package.json              # Конфигурация модулей
```

## Компоненты

### ActivationIcon
- Отображает иконку активации расширения
- Обрабатывает клики для открытия меню
- Анимации и hover эффекты

### MenuManager
- Управляет контекстным меню
- Создает иконки истории и чата
- Обрабатывает клики вне меню

### ChatManager
- Основной компонент управления чатом
- Координирует работу всех подкомпонентов
- Управляет состоянием интерфейса

### DragButton
- Кнопка для перетаскивания чата
- Ограничения перемещения
- Привязка к краям экрана

### PlusMenu
- Контекстное меню с дополнительными опциями
- Быстрые шаблоны
- Анализ workflow

### FileAttachment
- Прикрепление и отображение файлов
- Ограничения размера файлов
- Удаление вложений

### ChatMessages
- Отображение сообщений чата
- Анимации появления
- Форматирование текста

## Сервисы

### WorkflowExtractor
- Извлечение данных из n8n страниц
- Определение типа страницы
- Парсинг узлов и соединений

### OpenAIService
- Интеграция с OpenAI API
- Стриминг ответов
- Обработка ошибок

## Утилиты

### StateManager
- Централизованное управление состоянием
- Методы для работы с состоянием
- Сброс состояния

## Использование

Все компоненты используют ES6 модули и могут быть импортированы:

```javascript
import { ChatManager } from './components/chatManager.js';
import { StateManager } from './utils/stateManager.js';

const stateManager = new StateManager();
const chatManager = new ChatManager(stateManager);
```

## Особенности

- Модульная архитектура
- Разделение ответственности
- Переиспользуемые компоненты
- Централизованное управление состоянием
- Современный JavaScript (ES6+)
